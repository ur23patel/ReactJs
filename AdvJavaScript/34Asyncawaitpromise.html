<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>

<img src="loader.gif" id="loader" alt="">
    <ul id="disp">

    </ul>
    <script>
        function fetchData(params) {
            console.log("Called fetchData Data");
            // setTimeout(() => {
            //     console.log("Called inside fetch timeout");
            // }, 2000);
            // return new Promise(resolve => {
            //     setTimeout(() => {
            //         console.log("Called inside fetch timeout");
            //         resolve("done")
            //     }, 2000);
            // })
            return new Promise((resolve, reject) => {
                try {
                    fetch("https://jayramin.000webhostapp.com/allusers").then((res) => res.json()).then((response) => {
                        // console.log(response);
                        // return response
                        resolve(response.Data);
                    })
                } catch (error) {
                    reject("reject")
                }
            })
        }
        async function displayData(params) {
            console.log("Called Display Data11");
            const result2 = await fetchData();
            document.getElementById("loader").style.display="none"
            // console.log(result2);
            counter = 0
            result2.forEach(element => {
                counter++
                setTimeout(
                    () => (document.getElementById("disp").innerHTML += "<li id='light" + element.username+ "'" + "class='lights'>" + element.username + '</li>'),
                    100*counter
                );
            });
            console.log("Called after fetch Data");
        }
        displayData()
    </script>


</body>

</html>
